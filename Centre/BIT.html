<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>BIT Centre</title>
    </head>
    <body>
    	<br></br>
	<br></br>
    <a href ="https://sagekhw.github.io/index.html"> Main </a><br/>
    <br></br>
    <br></br>
    <p><h2> BIT교육센터 윈도우개발자과정 </h2></p>	
    
    <img src = https://github.com/sagekhw/sagekhw.github.io/blob/master/Centre/I/bitwin.png?raw=true width="800" height="1000"/>
    <img src = https://github.com/sagekhw/sagekhw.github.io/blob/master/Centre/I/bitwin1.png?raw=true width="800" height="1000"/>
    <p><h2>미니프로젝트</h2></p>
    <p><h2>윈도우 드라이버 학습</h2></p>
    
    
<p><h3>프로젝트 주제(MFC프로그래밍)</h3></p>
<p><h3>1. 비디오관리</h3></p>
<p><h3>1) 회원관리</h3></p>
<p><h3>a. 회원번호는 자동부여</h3></p>
<p><h3>b. 회원의 사진을 관리한다.</h3></p>
<p><h3>c. 연체료를 관리한다.</h3></p>
<p><h3>d. 대여정보가 있는 회원은 삭제할 수 없다.</h3></p>
<p><h3>e. 삭제는 대여정보가 있으면 대여플래그를 Setting하여 처리한다.</h3></p>
<p><h3>2) 비디오관리</h3></p>
<p><h3>a. 비디오테이프번호는 자동부여</h3></p>
<p><h3>b. 동일한 이름의 비디오는 여러번 등록할 수 있다. (비디오상점에 여러개의 같은 비디오 테이프가 가능하기 때문)</h3></p>
<p><h3>b. 영화포스터사진을 관리한다.</h3></p>
<p><h3>c. 영화등급을 관리한다. (성인물 : 청소년 대여 불가)</h3></p>
<p><h3>d. 대여정보가 있는 비디오는 삭제할 수 없다.</h3></p>
<p><h3>e. 삭제는 대여정보가 있으면 대여플래그를 Setting하여 처리한다.</h3></p>
<p><h3>3) 대여관리</h3></p>
<p><h3>a. 대여중인 비디오는 대여할 수 없다.</h3></p>
<p><h3>b. 등록된 회원만 대여가 가능하다.</h3></p>
<p><h3>c. 등록된 비디오만 대여가 가능하다.</h3></p>
<p><h3>d. 대여중 회원의 미 반납비디오출력 기능이 있다.</h3></p>
<p><h3>e. 반납시 연체료를 자동계산하여 부가한다.</h3></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>				</h2></p>
<p><h2>윈도우 드라이버 학습</h2></p>
<img src = https://github.com/sagekhw/sagekhw.github.io/blob/master/Centre/I/book.png?raw=true />

<p><h2>파일 시스템(File System)</h2></p>
테이터는 파일과, 디렉토리 형태로 저장, 과거에는 데이터의 효율적인 권리보다는 저장하는 행위에 중점, 데이터는 수시로 지워지며 덮어쓰여진다.
효과적인 관리를 위해 압축, 암호화, 동적 할당 등이 있다. 이러한 파일시스템은 파일시스템드라이버(NTFS.sys FAT.sys 등)에 의해 기록되어
관리되다가 삭제가 될데까지 데이터를 관리해준다.



<p><h3> </h3></p>
<p><h2>윈도우 디바이스 드라이버 모델, WDM</h2></p>
<p><h3>WDM은 윈도우 2000 혹은 윈도우 9x에 적용될 새로운 디바이스(USB와 IEEE 1394 등)를 위한 디바이스 드라이버 모델이다.</h3></p>
<p><h3>주목할만한 점은 플러그 앤 플레이를 지원하기 때문에 기존 NT 드라이버와 달리 I/O 관리자가 직접 디바이스 자원을 할당하고 </h3></p>
<p><h3>그 결과를 드라이버에 알려주는 방식을 채택했다는 것이다. 따라서 드라이버 개발자가 일일이 하드웨어 자원을 찾아 할당하는 </h3></p>
<p><h3>번거로운 과정이 필요없다. 하지만 WDM은 최근 선보인 일부 디바이스만 지원하므로 기존 드라이버를 모두 대체하지 못하며 기존 </h3></p>
<p><h3>디바이스에 대한 드라이버를 만들려면 해당 운영체제에 맞는 드라이버를 작성해야 한다. </h3></p>
<p><h3>WDM 드라이버는 기존 NT 드라이버를 기반으로 하는 실행 파일(sys 형태)로 작성된다. 대부분의 소스 코드가 윈도우 NT와 비슷하므로 </h3></p>
<p><h3>먼저 NT 드라이버 작성에 필요한 사항을 알아야 한다. 즉, WDM 작성시 관련 매뉴얼에 찾는 내용이 없다면 NT 드라이버 작성법을 </h3></p>
<p><h3>참조하면 된다는 뜻이다. 그러므로 NT 드라이버에 대해 전혀 모른다면 상당한 고초를 겪을 것이다. 이를 위해 WDM 드라이버 작성에 </h3></p>
<p><h3>바로 들어가지 않고 NT 드라이버 모델에서 알아야 할 몇 가지 내용을 정리한 다음 WDM 드라이버 작성에 대해 설명하겠다. </h3></p>


그림 2


<p><h3>WDM DDK WDM DDK는 마이크로소프트 홈페이지에서 윈도우 98용과 윈도우 2000용을 구할 수 있다. 윈도우 2000용은 베타 버전에 맞춰 DDK가 배포되고 있으며 윈도우 NT 4.0에서는 사용할 수 없다. </h3></p>
<p><h3>DDK를 구해 설치한 다음 DDK의 bin 디렉토리를 실행 경로에 넣어놓는 것이 여러모로 편하다. 또한 DDK로 컴파일하기 전에 bin 디렉토리의 setenv.bat을 실행해 라이브러리 관련 환경을 설정해야 한다. </h3></p>
<p><h3>그런데 환경 설정 과정에서 환경 변수를 상당히 많이 할당하므로 config.sys에 다음 문장을 추가해 환경 변수가 사용할 버퍼를 충분히 할당하는 것이 좋다. </h3></p>
<p><h3>shell=c:\win98\command.com /e:4096 /p </h3></p>
<p><h3>setenv.bat을 실행하기 전에 비주얼 C++의 bin 디렉토리에 있는 vcvars32.bat을 실행해 비주얼 C++도 설정해야 한다. 필자는 이들 배치 파일을 autoexec.bat에서 실행하도록 만들었다. </h3></p>
<p><h3>또한 윈도우 NT에서는 비주얼 C++를 설치하는 과정에서 환경 변수를 설정할 것인지 확인하고 전부 알아서 설정해 편리하지만, DDK의 경우에는 별도로 취할 수 있는 방법이 없으므로 직접 입력해야 한다. </h3></p>


<p><h3>계층형 드라이버 윈도우 NT에서도 유닉스와 마찬가지로 유저 모드와 커널 모드로 구분되어 소프트웨어가 실행된다. 즉, 유저 모드 프로그램은 Win32 시스템에서 실행되며 커널 모드 프로그램은 하드웨어 관련 소프트웨어를 다룬다.</h3></p>
<p><h3>윈도우 NT는 다양한 CPU를 지원하고 여러 개를 사용할 수 있으므로 직접 디바이스 제어하는 드라이버 모델인 VxD 드라이버(대신 호환성은 떨어진다)를 작성할 수 없다. 대신 드라이버는 HAL이라는 최종 인터페이스를 통해 실제 디바이스와 통신한다.</h3></p>
<p><h3>또한 디바이스 종류에 따라 작성하는 드라이버 구조도 차이가 있다. </h3></p>

그림3

<p><h3>계층형 구조를 가진 NT 드라이버의 중요한 특징은 특정 드라이버가 자신의 현재 입출력 요청을 처리할 수 있는 다른 드라이버에 넘겨 대신 처리하도록 요청할 수 있다는 점이다. 물론 처리 결과는 요청한 드라이버가 다시 받는다.</h3></p>
<p><h3>윈도우 NT는 이를 응용해 특정 디바이스에 대한 드라이버를 하드웨어에 근접한 순으로 여러 층에 걸쳐 구성하고 상위 드라이버가 애플리케이션에서 입출력 요청을 받아 차례대로 하위 드라이버에게 처리 요청을 전달하는 방식을 사용한다. </h3></p>
<p><h3>계층형 드라이버는 여러 개의 미니 드라이버와 소수의 버스/클래스 드라이버가 계층을 이루고 있다. 즉 특정 디바이스에 통달한 드라이버 마스터가 만든 하위의 버스 클래스 드라이버와 클래스 드라이버는 특정 디바이스의 기본 입출력 </h3></p>
<p><h3>기능만 제공하고 복잡한 디바이스 제어는 모두 숨긴다. 그러면 드라이버 개발자는 클래스 드라이버가 제공하는 입출력 패턴을 사용해 자신이 작성할 드라이버를 보다 간단하게 만드는 것이다. </h3></p>
그림 4
<p><h3>필터 드라이버 필터 드라이버는 계층형 드라이버 중간의 적절한 위치에 드라이버를 착탈식으로 삽입시켜 이 드라이버가 입출력 요구를 처리하도록 만든 구조이다. 바로 WDM 드라이버가 필터 드라이버에 해당한다. WDM 드라이버는 디바이스를 </h3></p>
<p><h3>설치함과 동시에 동작하며 디바이스가 컴퓨터에서 제거되면 정지하고 제거된다. </h3></p>

<p><h2>파일 시스템 동작 원리</h2></p>
그림 1
<p><h3>(1) 사용자/응용 프로그램에서 저장 매체로부터 데이터 송·수신을요구.</h3></p>
<p><h3>(2) I/O Manager는 Cache Manager에게 기로고딘 Cache가 있는지 확인 요청(Fast I/O)</h3></p>
<p><h3>(3) Cache Manager는 System Cache의 상태를 체크 후, 요청에 대해 미 충족 시 Virtual Memory Manager(VM)가 개입되어 Page Fault를 발생.</h3></p>
<p><h3>(4) 파일 시스템 드라이버는 Low Level Driver로 부터 송·수신 된 데이터를 VMM에게 변환하고, VMM은 System Cache에 일정양을 저장합니다.</h3></p>
<p><h3>(5) Cache Manager는 System Cache로 부터 요청된 데이터를 I/O Manager에게 전달.</h3></p>
<p><h3>(6) I/O Manager는 사용자에게 요청을 반환.</h3></p>

<br></br>
<br></br>
    <a href ="https://sagekhw.github.io/index.html"> Main </a><br/>
    <br></br>
    <br></br>
		
</body>
  </body>
</html>
